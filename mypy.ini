[mypy]
python_version = 3.11
# Relaxed strict mode for hardware code with many untyped external libs
warn_return_any = false
warn_unused_configs = true
warn_redundant_casts = true
warn_unused_ignores = false
show_error_codes = true
show_column_numbers = true
pretty = true
ignore_missing_imports = true

# Disable common errors for hardware-interfacing code (one per line)
disable_error_code = import-untyped,import-not-found,no-any-return,no-untyped-call,no-untyped-def,attr-defined,override,assignment,return-value

# Package-specific settings - keep some strictness for non-hardware core
[mypy-robo_infra.*]
check_untyped_defs = true

# Third-party packages without stubs
[mypy-smbus2.*]
ignore_missing_imports = true

[mypy-spidev.*]
ignore_missing_imports = true

[mypy-serial.*]
ignore_missing_imports = true
follow_imports = skip

[mypy-serial.tools.*]
ignore_missing_imports = true
follow_imports = skip

[mypy-lgpio.*]
ignore_missing_imports = true
follow_imports = skip

[mypy-RPi.*]
ignore_missing_imports = true
follow_imports = skip

[mypy-RPi.GPIO.*]
ignore_missing_imports = true
follow_imports = skip

[mypy-gpiozero.*]
ignore_missing_imports = true
follow_imports = skip

[mypy-pigpio.*]
ignore_missing_imports = true
follow_imports = skip

[mypy-board.*]
ignore_missing_imports = true

[mypy-busio.*]
ignore_missing_imports = true

[mypy-adafruit_pca9685.*]
ignore_missing_imports = true

[mypy-scipy.*]
ignore_missing_imports = true

[mypy-scipy.ndimage.*]
ignore_missing_imports = true

[mypy-Jetson.*]
ignore_missing_imports = true

[mypy-torch.*]
ignore_missing_imports = true

[mypy-fastapi.*]
ignore_missing_imports = true

[mypy-pydantic.*]
ignore_missing_imports = true

# Integration modules have dynamic imports
[mypy-robo_infra.integrations.*]
disallow_untyped_decorators = false

[mypy-robo_infra.safety.limits]
warn_return_any = false

[mypy-pyfirmata.*]
ignore_missing_imports = true

[mypy-pyfirmata2.*]
ignore_missing_imports = true

[mypy-websocket.*]
ignore_missing_imports = true

# Hardware-specific SDKs without stubs
[mypy-odrive.*]
ignore_missing_imports = true

[mypy-pyvesc.*]
ignore_missing_imports = true

[mypy-can.*]
ignore_missing_imports = true

[mypy-cv2.*]
ignore_missing_imports = true

[mypy-open3d.*]
ignore_missing_imports = true

[mypy-picamera2.*]
ignore_missing_imports = true

[mypy-picamera.*]
ignore_missing_imports = true

[mypy-depthai.*]
ignore_missing_imports = true

[mypy-gpiod.*]
ignore_missing_imports = true

[mypy-Adafruit_BBIO.*]
ignore_missing_imports = true

[mypy-pyrealsense2.*]
ignore_missing_imports = true

[mypy-dynamixel_sdk.*]
ignore_missing_imports = true

[mypy-apriltag.*]
ignore_missing_imports = true

[mypy-cv2.aruco.*]
ignore_missing_imports = true

[mypy-pynmea2.*]
ignore_missing_imports = true

[mypy-pyudev.*]
ignore_missing_imports = true

# Hardware driver modules using untyped external libraries
# These modules interface with hardware SDKs that don't have type stubs
[mypy-robo_infra.drivers.bno055]
ignore_errors = true

[mypy-robo_infra.drivers.step_dir]
ignore_errors = true

[mypy-robo_infra.drivers.icm20948]
ignore_errors = true

[mypy-robo_infra.drivers.bmi270]
ignore_errors = true

[mypy-robo_infra.drivers.lsm6ds3]
ignore_errors = true

[mypy-robo_infra.drivers.dynamixel]
ignore_errors = true

[mypy-robo_infra.drivers.odrive]
ignore_errors = true

[mypy-robo_infra.drivers.vesc]
ignore_errors = true

[mypy-robo_infra.drivers.gpio]
ignore_errors = true

[mypy-robo_infra.drivers.arduino]
ignore_errors = true

# Vision modules using OpenCV and other untyped libraries
[mypy-robo_infra.vision.color]
ignore_errors = true

[mypy-robo_infra.vision.markers]
ignore_errors = true

[mypy-robo_infra.vision.processing]
ignore_errors = true

# Platform modules with hardware-specific dynamic imports
[mypy-robo_infra.platforms.beaglebone]
ignore_errors = true

[mypy-robo_infra.platforms.linux_generic]
ignore_errors = true

[mypy-robo_infra.platforms.esp32]
ignore_errors = true

[mypy-robo_infra.platforms.raspberry_pi]
ignore_errors = true

[mypy-robo_infra.platforms.jetson]
ignore_errors = true

[mypy-robo_infra.platforms.arduino]
ignore_errors = true

# Sensor modules with hardware interfaces
[mypy-robo_infra.sensors.lidar]
ignore_errors = true

[mypy-robo_infra.sensors.gps]
ignore_errors = true

[mypy-robo_infra.sensors.cameras.oak]
ignore_errors = true

[mypy-robo_infra.sensors.cameras.picamera]
ignore_errors = true

[mypy-robo_infra.sensors.cameras.realsense]
ignore_errors = true

[mypy-robo_infra.sensors.cameras.usb]
ignore_errors = true

[mypy-robo_infra.sensors.camera]
ignore_errors = true

# Protocol modules with external libraries
[mypy-robo_infra.protocols.modbus]
ignore_errors = true

[mypy-robo_infra.protocols.canopen]
ignore_errors = true

# Core modules with bus abstractions
[mypy-robo_infra.core.bus]
ignore_errors = true

[mypy-robo_infra.core.can_bus]
ignore_errors = true

# Motion modules
[mypy-robo_infra.motion.path_planning]
ignore_errors = true

[mypy-robo_infra.motion.ik_solvers]
ignore_errors = true

[mypy-robo_infra.motion.stewart]
ignore_errors = true

[mypy-robo_infra.motion.fusion]
ignore_errors = true
